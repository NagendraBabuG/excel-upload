{"ast":null,"code":"import _regeneratorRuntime from\"/home/justcode/Desktop/intern_assg/neemtree/excel-upload/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/justcode/Desktop/intern_assg/neemtree/excel-upload/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/justcode/Desktop/intern_assg/neemtree/excel-upload/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef}from\"react\";import\"./App.css\";import{useState}from\"react\";import axios from\"axios\";import Response from\"./components/response/response\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faUpload}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"Upload Xlsx files here\"),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUploaded=_useState6[0],setIsUploaded=_useState6[1];var _useState7=useState(400),_useState8=_slicedToArray(_useState7,2),respond=_useState8[0],setRespond=_useState8[1];var fileInputRef=useRef(null);var handleFileUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var tmp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:tmp=event.target.files[0];setSelectedFile(event.target.files[0]);console.log(tmp);if(!(event.target.files[0]===undefined)){_context.next=5;break;}return _context.abrupt(\"return\");case 5:setMsg(tmp.name);case 6:case\"end\":return _context.stop();}},_callee);}));return function handleFileUpload(_x){return _ref.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var formData,config,resp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:formData=new FormData();console.log(\"selected file ,\",selectedFile);if(!(selectedFile===undefined)){_context2.next=5;break;}setMsg(\"Error\");return _context2.abrupt(\"return\");case 5:formData.append(\"file\",selectedFile);_context2.prev=6;config={method:\"post\",maxBodyLength:Infinity,url:\"https://excelupload-backend-production.up.railway.app/upload\",headers:{\"Content-Type\":formData.get('Content-Type')},data:formData};_context2.next=10;return axios.request(config);case 10:resp=_context2.sent;setRespond(resp.status);console.log(resp.status);setIsUploaded(true);console.log(resp);_context2.next=23;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](6);console.log(_context2.t0);setMsg(\"Error\");setRespond(400);setIsUploaded(true);case 23:case\"end\":return _context2.stop();}},_callee2,null,[[6,17]]);}));return function onSubmit(){return _ref2.apply(this,arguments);};}();var handleClick=function handleClick(){fileInputRef.current.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Add From Excel\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"heading\",children:\"Add Candidates to Database\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:isUploaded?/*#__PURE__*/_jsx(Response,{status:respond}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,accept:\".xlsx\",onChange:handleFileUpload,style:{display:\"none\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"upload\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUpload,size:\"2xl\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"submit\",onClick:onSubmit,style:{display:selectedFile?\"inline-block\":\"none\"},children:\"Submit\"})]})}),!isUploaded&&/*#__PURE__*/_jsx(\"div\",{children:msg})]});}export default App;","map":{"version":3,"names":["React","useRef","useState","axios","Response","FontAwesomeIcon","faUpload","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","msg","setMsg","_useState3","undefined","_useState4","selectedFile","setSelectedFile","_useState5","_useState6","isUploaded","setIsUploaded","_useState7","_useState8","respond","setRespond","fileInputRef","handleFileUpload","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","tmp","wrap","_callee$","_context","prev","next","target","files","console","log","abrupt","name","stop","_x","apply","arguments","onSubmit","_ref2","_callee2","formData","config","resp","_callee2$","_context2","FormData","append","method","maxBodyLength","Infinity","url","headers","get","data","request","sent","status","t0","handleClick","current","click","className","children","type","ref","accept","onChange","style","display","onClick","icon","size"],"sources":["/home/justcode/Desktop/intern_assg/neemtree/excel-upload/src/App.js"],"sourcesContent":["import React, { useRef } from \"react\";\nimport \"./App.css\";\nimport { useState } from \"react\";\n\nimport axios from \"axios\";\nimport Response from \"./components/response/response\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction App() {\n  const [msg, setMsg] = useState(\"Upload Xlsx files here\");\n  const [selectedFile, setSelectedFile] = useState(undefined);\n  const [isUploaded, setIsUploaded] = useState(false);\n  const [respond, setRespond] = useState(400)\n  const fileInputRef = useRef(null);\n\n  const handleFileUpload = async (event) => {\n    const tmp = event.target.files[0];\n    setSelectedFile(event.target.files[0]);\n    console.log(tmp);\n    \n    if (event.target.files[0] === undefined) return;\n    setMsg(tmp.name);\n  };\n\n  const onSubmit = async () => {\n    const formData = new FormData();\n    console.log(\"selected file ,\", selectedFile);\n    if (selectedFile === undefined) {\n      setMsg(\"Error\");\n      return;\n    }\n    formData.append(\"file\", selectedFile);\n    try {\n        const config = {\n            method: \"post\",\n            maxBodyLength: Infinity,\n            url: \"https://excelupload-backend-production.up.railway.app/upload\",\n            headers: {\n              \"Content-Type\": formData.get('Content-Type')\n            },\n            data: formData,\n          };\n\n      const resp = await axios.request(config);\n      setRespond(resp.status)\n      console.log(resp.status)\n      setIsUploaded(true)\n      console.log(resp);\n    } catch (error) {\n      console.log(error);\n      setMsg(\"Error\");\n      setRespond(400)\n      setIsUploaded(true)\n    }\n  };\n\n  const handleClick = () => {\n    fileInputRef.current.click();\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"navbar\"><h3>Add From Excel</h3></div>\n      <div className=\"heading\">Add Candidates to Database</div>\n      \n      <div className=\"container\">\n      { isUploaded ? <Response status = {respond}></Response>: <div>\n\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          accept=\".xlsx\"\n          onChange={handleFileUpload}\n          style={{ display: \"none\" }}\n        />\n        <button onClick={handleClick} className=\"upload\">\n          <FontAwesomeIcon icon={faUpload} size=\"2xl\"></FontAwesomeIcon>\n        </button>\n        <br></br>\n        <button className=\"submit\" onClick={onSubmit} style={{ display: selectedFile ? \"inline-block\" : \"none\" }}>\n          Submit\n        </button>\n       </div>}\n      </div>\n     {!isUploaded && <div>{msg}</div>}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}